// repository configuration
// java source compatibility
allprojects {
    repositories {
        mavenCentral()
        jcenter()
    }

    apply plugin: "java"
    sourceCompatibility = 1.11
}

// apply jacoco coverage for all projects
apply from: 'gradle/jacoco-all.gradle'

// clean auxiliary folders generated by idea
apply from: 'gradle/idea-clean.gradle'

// fix resource finding problem for idea
apply from: 'gradle/idea-fix.gradle'

configure(subprojects.findAll {!it.name.contains('scraper-nodes') && !it.name.contains('scraper-plugins')}) {
    // core is versioned separately from nodes and plugins
    version = '1.0.0-rc1'

    // fixes
    apply from: '../gradle/gradle-module-fix.gradle'
    apply from: '../gradle/gradle-test-resources-fix.gradle'

    task api(type: Jar) {
        destinationDir = file("$rootDir/build/api")
    }
}
